{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/divesh/Downloads/assigment%20%281%29/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\"\nimport {\n  getAuth,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  onAuthStateChanged,\n  type User,\n} from \"firebase/auth\"\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n}\n\n// Log config for debugging (only in development)\nif (typeof window !== \"undefined\") {\n  console.log(\"Firebase Config:\", {\n    apiKey: firebaseConfig.apiKey?.substring(0, 10) + \"...\",\n    authDomain: firebaseConfig.authDomain,\n    projectId: firebaseConfig.projectId,\n  })\n}\n\n// Initialize Firebase only if not already initialized\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0]\nconst auth = getAuth(app)\n\n// Auth mode: \"test\" = no auth required, \"development\" = Firebase auth required\nexport const AUTH_MODE = process.env.NEXT_PUBLIC_AUTH_MODE || \"test\"\nexport const isTestMode = () => AUTH_MODE === \"test\"\n\n// Sign in with email and password\nexport async function signIn(email: string, password: string): Promise<User> {\n  try {\n    console.log(\"Attempting sign in for:\", email)\n    const userCredential = await signInWithEmailAndPassword(auth, email, password)\n    console.log(\"Sign in successful\")\n    return userCredential.user\n  } catch (error: any) {\n    console.error(\"Sign in error:\", error.code, error.message)\n    throw error\n  }\n}\n\n// Create new user account\nexport async function signUp(email: string, password: string): Promise<User> {\n  try {\n    console.log(\"Attempting sign up for:\", email)\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password)\n    console.log(\"Sign up successful\")\n    return userCredential.user\n  } catch (error: any) {\n    console.error(\"Sign up error:\", error.code, error.message)\n    throw error\n  }\n}\n\n// Sign out\nexport async function logout(): Promise<void> {\n  await signOut(auth)\n}\n\n// Subscribe to auth state changes\nexport function onAuthChange(callback: (user: User | null) => void): () => void {\n  return onAuthStateChanged(auth, callback)\n}\n\n// Get current user\nexport function getCurrentUser(): User | null {\n  return auth.currentUser\n}\n\nexport { auth }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AAAA;;;AASA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,iDAAiD;AACjD;;AAQA,sDAAsD;AACtD,MAAM,MAAM,IAAA,2KAAO,IAAG,MAAM,KAAK,IAAI,IAAA,iLAAa,EAAC,kBAAkB,IAAA,2KAAO,GAAE,CAAC,EAAE;AACjF,MAAM,OAAO,IAAA,6KAAO,EAAC;AAGd,MAAM,YAAY,4CAAqC;AACvD,MAAM,aAAa,IAAM,cAAc;AAGvC,eAAe,OAAO,KAAa,EAAE,QAAgB;IAC1D,IAAI;QACF,QAAQ,GAAG,CAAC,2BAA2B;QACvC,MAAM,iBAAiB,MAAM,IAAA,gMAA0B,EAAC,MAAM,OAAO;QACrE,QAAQ,GAAG,CAAC;QACZ,OAAO,eAAe,IAAI;IAC5B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,kBAAkB,MAAM,IAAI,EAAE,MAAM,OAAO;QACzD,MAAM;IACR;AACF;AAGO,eAAe,OAAO,KAAa,EAAE,QAAgB;IAC1D,IAAI;QACF,QAAQ,GAAG,CAAC,2BAA2B;QACvC,MAAM,iBAAiB,MAAM,IAAA,oMAA8B,EAAC,MAAM,OAAO;QACzE,QAAQ,GAAG,CAAC;QACZ,OAAO,eAAe,IAAI;IAC5B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,kBAAkB,MAAM,IAAI,EAAE,MAAM,OAAO;QACzD,MAAM;IACR;AACF;AAGO,eAAe;IACpB,MAAM,IAAA,6KAAO,EAAC;AAChB;AAGO,SAAS,aAAa,QAAqC;IAChE,OAAO,IAAA,wLAAkB,EAAC,MAAM;AAClC;AAGO,SAAS;IACd,OAAO,KAAK,WAAW;AACzB"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/divesh/Downloads/assigment%20%281%29/lib/auth-context.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useEffect, useState, type ReactNode } from \"react\"\nimport { type User } from \"firebase/auth\"\nimport { onAuthChange, signIn, signUp, logout } from \"@/lib/firebase\"\n\ninterface AuthContextType {\n  user: User | null\n  isLoading: boolean\n  isAuthenticated: boolean\n  authMode: \"test\" | \"development\"\n  isTestMode: boolean\n  setAuthMode: (mode: \"test\" | \"development\") => void\n  login: (email: string, password: string) => Promise<void>\n  register: (email: string, password: string) => Promise<void>\n  logoutUser: () => Promise<void>\n  error: string | null\n  clearError: () => void\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\n// Get initial auth mode from localStorage or env\nfunction getInitialAuthMode(): \"test\" | \"development\" {\n  if (typeof window !== \"undefined\") {\n    const stored = localStorage.getItem(\"authMode\")\n    if (stored === \"test\" || stored === \"development\") {\n      return stored\n    }\n  }\n  return (process.env.NEXT_PUBLIC_AUTH_MODE as \"test\" | \"development\") || \"test\"\n}\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [testModeLoggedIn, setTestModeLoggedIn] = useState(false)\n  const [authMode, setAuthModeState] = useState<\"test\" | \"development\">(\"test\")\n\n  // Initialize auth mode from localStorage\n  useEffect(() => {\n    const mode = getInitialAuthMode()\n    setAuthModeState(mode)\n  }, [])\n\n  const isTestModeActive = authMode === \"test\"\n\n  // Set auth mode and persist to localStorage\n  const setAuthMode = (mode: \"test\" | \"development\") => {\n    setAuthModeState(mode)\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(\"authMode\", mode)\n    }\n    // Reset auth state when switching modes\n    setUser(null)\n    setTestModeLoggedIn(false)\n    setError(null)\n  }\n\n  useEffect(() => {\n    // In test mode, don't use Firebase auth\n    if (isTestModeActive) {\n      setIsLoading(false)\n      return\n    }\n\n    // Subscribe to Firebase auth state changes\n    const unsubscribe = onAuthChange((firebaseUser) => {\n      setUser(firebaseUser)\n      setIsLoading(false)\n    })\n\n    return () => unsubscribe()\n  }, [isTestModeActive])\n\n  const login = async (email: string, password: string) => {\n    setError(null)\n    setIsLoading(true)\n\n    try {\n      if (isTestModeActive) {\n        // In test mode, accept any credentials\n        setTestModeLoggedIn(true)\n        setIsLoading(false)\n        return\n      }\n\n      await signIn(email, password)\n    } catch (err: any) {\n      const errorMessage = getFirebaseErrorMessage(err.code)\n      setError(errorMessage)\n      throw new Error(errorMessage)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const register = async (email: string, password: string) => {\n    setError(null)\n    setIsLoading(true)\n\n    try {\n      if (isTestModeActive) {\n        setTestModeLoggedIn(true)\n        setIsLoading(false)\n        return\n      }\n\n      await signUp(email, password)\n    } catch (err: any) {\n      const errorMessage = getFirebaseErrorMessage(err.code)\n      setError(errorMessage)\n      throw new Error(errorMessage)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const logoutUser = async () => {\n    try {\n      if (isTestModeActive) {\n        setTestModeLoggedIn(false)\n        return\n      }\n\n      await logout()\n    } catch (err: any) {\n      setError(\"Failed to logout\")\n    }\n  }\n\n  const clearError = () => setError(null)\n\n  // Determine if user is authenticated\n  const isAuthenticated = isTestModeActive ? testModeLoggedIn : !!user\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isLoading,\n        isAuthenticated,\n        authMode,\n        isTestMode: isTestModeActive,\n        setAuthMode,\n        login,\n        register,\n        logoutUser,\n        error,\n        clearError,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n\n// Helper function to convert Firebase error codes to user-friendly messages\nfunction getFirebaseErrorMessage(code: string): string {\n  switch (code) {\n    case \"auth/invalid-email\":\n      return \"Invalid email address\"\n    case \"auth/user-disabled\":\n      return \"This account has been disabled\"\n    case \"auth/user-not-found\":\n      return \"No account found with this email\"\n    case \"auth/wrong-password\":\n      return \"Incorrect password\"\n    case \"auth/email-already-in-use\":\n      return \"An account already exists with this email\"\n    case \"auth/weak-password\":\n      return \"Password should be at least 6 characters\"\n    case \"auth/operation-not-allowed\":\n      return \"Email/password accounts are not enabled\"\n    case \"auth/too-many-requests\":\n      return \"Too many failed attempts. Please try again later\"\n    case \"auth/invalid-credential\":\n      return \"Invalid email or password\"\n    default:\n      return \"Authentication failed. Please try again\"\n  }\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AAJA;;;;AAoBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAE/D,iDAAiD;AACjD,SAAS;IACP;;IAMA,OAAO,4CAAiE;AAC1E;AAEO,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,CAAC,UAAU,iBAAiB,GAAG,IAAA,iNAAQ,EAAyB;IAEtE,yCAAyC;IACzC,IAAA,kNAAS,EAAC;QACR,MAAM,OAAO;QACb,iBAAiB;IACnB,GAAG,EAAE;IAEL,MAAM,mBAAmB,aAAa;IAEtC,4CAA4C;IAC5C,MAAM,cAAc,CAAC;QACnB,iBAAiB;QACjB;;QAGA,wCAAwC;QACxC,QAAQ;QACR,oBAAoB;QACpB,SAAS;IACX;IAEA,IAAA,kNAAS,EAAC;QACR,wCAAwC;QACxC,IAAI,kBAAkB;YACpB,aAAa;YACb;QACF;QAEA,2CAA2C;QAC3C,MAAM,cAAc,IAAA,+HAAY,EAAC,CAAC;YAChC,QAAQ;YACR,aAAa;QACf;QAEA,OAAO,IAAM;IACf,GAAG;QAAC;KAAiB;IAErB,MAAM,QAAQ,OAAO,OAAe;QAClC,SAAS;QACT,aAAa;QAEb,IAAI;YACF,IAAI,kBAAkB;gBACpB,uCAAuC;gBACvC,oBAAoB;gBACpB,aAAa;gBACb;YACF;YAEA,MAAM,IAAA,yHAAM,EAAC,OAAO;QACtB,EAAE,OAAO,KAAU;YACjB,MAAM,eAAe,wBAAwB,IAAI,IAAI;YACrD,SAAS;YACT,MAAM,IAAI,MAAM;QAClB,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,WAAW,OAAO,OAAe;QACrC,SAAS;QACT,aAAa;QAEb,IAAI;YACF,IAAI,kBAAkB;gBACpB,oBAAoB;gBACpB,aAAa;gBACb;YACF;YAEA,MAAM,IAAA,yHAAM,EAAC,OAAO;QACtB,EAAE,OAAO,KAAU;YACjB,MAAM,eAAe,wBAAwB,IAAI,IAAI;YACrD,SAAS;YACT,MAAM,IAAI,MAAM;QAClB,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,aAAa;QACjB,IAAI;YACF,IAAI,kBAAkB;gBACpB,oBAAoB;gBACpB;YACF;YAEA,MAAM,IAAA,yHAAM;QACd,EAAE,OAAO,KAAU;YACjB,SAAS;QACX;IACF;IAEA,MAAM,aAAa,IAAM,SAAS;IAElC,qCAAqC;IACrC,MAAM,kBAAkB,mBAAmB,mBAAmB,CAAC,CAAC;IAEhE,qBACE,8OAAC,YAAY,QAAQ;QACnB,OAAO;YACL;YACA;YACA;YACA;YACA,YAAY;YACZ;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAEA,4EAA4E;AAC5E,SAAS,wBAAwB,IAAY;IAC3C,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF"}}]
}